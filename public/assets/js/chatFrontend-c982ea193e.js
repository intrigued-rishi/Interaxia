class Chat{constructor(s,e,t){this.userMail=e,this.box=$("#"+s),this.otherUser=t,this.socket=io(),e&&this.connectionHandler()}connectionHandler(){const s=this;this.socket.on("connect",(function(){console.log("Connected to chat server!")})),this.socket.emit("join_room",{me:this.userMail,other:this.otherUser}),this.socket.on("new_person",(function(s){alert(s.message)})),this.socket.on("get_mssg",(function(e){let t;if(e.email==s.userMail)t=$(`<p>${e.val}</p>`),t.addClass("self-mssg");else{let s=$("#chat-name").text();t=$(`<p><small>${s}</small>${e.val}</p>`),t.addClass("other-mssg")}$("#body-chat").append(t)}));var e={from:this.userMail,to:this.otherUser};$("#mssg-send").on("click",(function(){let t=$("#mssg-form").val();s.socket.emit("new_mssg",{val:t,email:s.userMail}),$("#mssg-form").val(""),$.ajax({type:"POST",url:"/message/save",data:{val:t,par:e},success:function(s){console.log(s)}})}))}}